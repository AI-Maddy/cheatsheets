â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš¡ QoS - Quality of Service
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Overview
--------
Quality of Service (QoS) refers to network traffic management techniques that prioritize certain types of data to ensure consistent performance for critical applications. Essential for real-time media where latency and jitter directly impact quality.

Key Features
------------
- **Traffic Prioritization**: Critical traffic gets preference
- **Bandwidth Management**: Allocate bandwidth per application
- **Latency Control**: Minimize delays for time-sensitive data
- **Jitter Reduction**: Consistent packet arrival timing
- **Packet Loss Prevention**: Protect important traffic

QoS Mechanisms
--------------
**Classification**: Identify traffic types
  - By IP address, port, protocol, VLAN
  - Deep packet inspection (DPI)

**Marking**: Tag packets with priority
  - DSCP (Differentiated Services Code Point)
  - CoS (Class of Service - 802.1p)
  - MPLS EXP bits

**Queuing**: Manage packet transmission order
  - Priority Queuing (PQ)
  - Weighted Fair Queuing (WFQ)
  - Class-Based Weighted Fair Queuing (CBWFQ)

**Policing/Shaping**: Control traffic rates
  - Policing: Drop exceeding traffic
  - Shaping: Buffer and smooth traffic

DSCP Values
-----------
+----------------+-------------+----------------------------+
| DSCP Value     | Binary      | Traffic Class              |
+================+=============+============================+
| EF (46)        | 101110      | Expedited Forwarding (VoIP)|
| AF41 (34)      | 100010      | Assured Forwarding (video) |
| AF31 (26)      | 011010      | Assured Forwarding (stream)|
| CS3 (24)       | 011000      | Class Selector (signal)    |
| AF21 (18)      | 010010      | Assured Forwarding (data)  |
| CS0/BE (0)     | 000000      | Best Effort (default)      |
+----------------+-------------+----------------------------+

Common Use Cases
----------------
1. **Video Conferencing**: Low latency for Zoom/Teams
2. **IPTV**: Prioritize video streams over web browsing
3. **VoIP**: Guaranteed quality for phone calls
4. **Live Production**: Ensure SMPTE 2110 video delivery
5. **Gaming**: Reduce lag for online gaming

ğŸ’¡ Memory Aid
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ§  MEMORY PALACE: QoS as Airport Security Lanes                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Think of QoS as AIRPORT SECURITY SCREENING with PRIORITY LANES:          â”‚
â”‚                                                                           â”‚
â”‚  ğŸ›« [Network Router] = Airport Security Checkpoint                         â”‚
â”‚      Limited screening capacity (bandwidth)                               â”‚
â”‚      Must process everyone, but can prioritize                            â”‚
â”‚                                                                           â”‚
â”‚  Each type of traffic = Different passenger class:                        â”‚
â”‚                                                                           â”‚
â”‚  âœˆï¸ FIRST CLASS Lane (Priority Queue - EF/DSCP 46):                       â”‚
â”‚      VoIP phone calls â† Critical, can't wait                              â”‚
â”‚      Go through IMMEDIATELY, skip the line                                â”‚
â”‚      Never stuck in queue                                                 â”‚
â”‚      Like pilots on duty - always priority                                â”‚
â”‚                                                                           â”‚
â”‚  ğŸ¥ BUSINESS CLASS Lane (AF41/DSCP 34):                                   â”‚
â”‚      Live video streams â† Important, low tolerance for delay              â”‚
â”‚      Fast-track lane, short wait                                          â”‚
â”‚      Get 60% of checkpoint bandwidth                                      â”‚
â”‚      Like business travelers - expedited service                          â”‚
â”‚                                                                           â”‚
â”‚  ğŸ‘¥ ECONOMY CLASS Lane (AF21/DSCP 18):                                    â”‚
â”‚      Email, web browsing â† Can tolerate delay                             â”‚
â”‚      Normal screening, longer wait possible                               â”‚
â”‚      Get 20% of bandwidth                                                 â”‚
â”‚      Like regular passengers - wait their turn                            â”‚
â”‚                                                                           â”‚
â”‚  ğŸš« STANDBY Lane (Best Effort/DSCP 0):                                    â”‚
â”‚      File downloads, bulk transfers â† Low priority                        â”‚
â”‚      Only screened when no one else waiting                               â”‚
â”‚      Get whatever bandwidth is left over                                  â”‚
â”‚      Like standby passengers - fly if seats available                     â”‚
â”‚                                                                           â”‚
â”‚  ğŸ·ï¸ [DSCP Marking] = Ticket Class Printed on Boarding Pass                â”‚
â”‚      At ticket counter (source), passenger gets priority stamped          â”‚
â”‚      Security (router) reads stamp and directs to correct lane            â”‚
â”‚      Can't change your class mid-checkpoint!                              â”‚
â”‚                                                                           â”‚
â”‚  â±ï¸ [Latency Budget] = Maximum Wait Time                                  â”‚
â”‚      VoIP: Must clear security in 150ms (flight boards soon!)             â”‚
â”‚      Video: 200ms is acceptable                                           â”‚
â”‚      Email: Can wait hours if needed                                      â”‚
â”‚                                                                           â”‚
â”‚  The beauty: Everyone gets through eventually, but critical traffic       â”‚
â”‚  (VoIP, live video) never waits! Fair to all, but prioritizes mission-   â”‚
â”‚  critical services. Just like airport security!                           â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš¡ Priority Queue Visualization
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Router Output Interface with QoS Queues                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  INCOMING TRAFFIC (Classification):                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                 â”‚
â”‚                                                                           â”‚
â”‚   ğŸ“ VoIP Packet (DSCP 46 = EF)                                          â”‚
â”‚   ğŸ¥ Video Packet (DSCP 34 = AF41)                                       â”‚
â”‚   ğŸ“§ Email Packet (DSCP 18 = AF21)                                       â”‚
â”‚   ğŸ“ File Download (DSCP 0 = BE)                                         â”‚
â”‚             â”‚                                                             â”‚
â”‚             â”‚ Classifier inspects DSCP field                              â”‚
â”‚             â–¼                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚         ROUTER QUEUING SYSTEM                   â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚             â”‚                                                             â”‚
â”‚             â”‚ Packets sorted into priority queues                        â”‚
â”‚             â”‚                                                             â”‚
â”‚        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚        â”‚         â”‚        â”‚        â”‚        â”‚                            â”‚
â”‚        â–¼         â–¼        â–¼        â–¼        â–¼                            â”‚
â”‚                                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Queue 1: PRIORITY (Strict Priority)                         â”‚       â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚       â”‚
â”‚   â”‚ ğŸ“ VoIP â”‚ ğŸ“ VoIP â”‚ ğŸ“ VoIP â”‚                                 â”‚       â”‚
â”‚   â”‚                                                              â”‚       â”‚
â”‚   â”‚ DSCP: EF (46)                                                â”‚       â”‚
â”‚   â”‚ Bandwidth: Unlimited (always served first)                   â”‚       â”‚
â”‚   â”‚ Max Latency: 150ms                                           â”‚       â”‚
â”‚   â”‚ Max Queue Depth: Small (10-20 packets to avoid bufferbloat)  â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚        â”‚                                                                  â”‚
â”‚        â”œâ”€ Served FIRST, always! â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚        â”‚                                            â”‚                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ Queue 2: VIDEO (Guaranteed 60% bandwidth)                    â”‚      â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚      â”‚
â”‚   â”‚ ğŸ¥ Videoâ”‚ğŸ¥ Videoâ”‚ğŸ¥ Videoâ”‚ğŸ¥ Videoâ”‚ğŸ¥ Videoâ”‚ğŸ¥ Videoâ”‚       â”‚      â”‚
â”‚   â”‚                                                               â”‚      â”‚
â”‚   â”‚ DSCP: AF41 (34)                                               â”‚      â”‚
â”‚   â”‚ Bandwidth: 60% of link (e.g., 600 Mbps of 1 Gbps)            â”‚      â”‚
â”‚   â”‚ Max Latency: 200ms                                            â”‚      â”‚
â”‚   â”‚ CBWFQ with bandwidth guarantee                                â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚        â”‚                                                                  â”‚
â”‚        â”œâ”€ Served SECOND (after Priority queue empty)                     â”‚
â”‚        â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ Queue 3: DATA (Guaranteed 20% bandwidth)                      â”‚     â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚     â”‚
â”‚   â”‚ ğŸ“§ Emailâ”‚ğŸ“§ Emailâ”‚ğŸ“§ Emailâ”‚                                   â”‚     â”‚
â”‚   â”‚                                                                â”‚     â”‚
â”‚   â”‚ DSCP: AF21 (18)                                                â”‚     â”‚
â”‚   â”‚ Bandwidth: 20% of link (e.g., 200 Mbps)                       â”‚     â”‚
â”‚   â”‚ Max Latency: Seconds acceptable                                â”‚     â”‚
â”‚   â”‚ WFQ with fair sharing                                          â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚        â”‚                                                                  â”‚
â”‚        â”œâ”€ Served THIRD                                                    â”‚
â”‚        â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ Queue 4: BEST EFFORT (Leftover bandwidth)                     â”‚     â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚     â”‚
â”‚   â”‚ ğŸ“ Fileâ”‚ğŸ“ Fileâ”‚ğŸ“ Fileâ”‚ğŸ“ Fileâ”‚ğŸ“ Fileâ”‚ğŸ“ Fileâ”‚ğŸ“ Fileâ”‚       â”‚     â”‚
â”‚   â”‚                                                                â”‚     â”‚
â”‚   â”‚ DSCP: 0 (Best Effort)                                          â”‚     â”‚
â”‚   â”‚ Bandwidth: Whatever remains (20% = 200 Mbps)                   â”‚     â”‚
â”‚   â”‚ Max Latency: No guarantee (could be seconds)                   â”‚     â”‚
â”‚   â”‚ FIFO queue - first come, first served                          â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚        â”‚                                                                  â”‚
â”‚        â”œâ”€ Served LAST (only when higher queues empty)                    â”‚
â”‚        â”‚                                                                  â”‚
â”‚        â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚        SCHEDULER (decides transmission order)   â”‚                   â”‚
â”‚   â”‚                                                 â”‚                   â”‚
â”‚   â”‚  Algorithm: Strict Priority + CBWFQ + WFQ      â”‚                   â”‚
â”‚   â”‚  1. Check Queue 1 (Priority) â†’ Send if packets â”‚                   â”‚
â”‚   â”‚  2. Check Queue 2 (Video) â†’ Send up to 60% BW  â”‚                   â”‚
â”‚   â”‚  3. Check Queue 3 (Data) â†’ Send up to 20% BW   â”‚                   â”‚
â”‚   â”‚  4. Check Queue 4 (BE) â†’ Send remaining BW     â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚                                                                  â”‚
â”‚        â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚     PHYSICAL OUTPUT INTERFACE (1 Gbps)          â”‚                   â”‚
â”‚   â”‚     ğŸ“ ğŸ¥ ğŸ“§ ğŸ“ â†’ â†’ â†’ â†’ â†’                        â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                           â”‚
â”‚  KEY INSIGHT:                                                             â”‚
â”‚  â€¢ VoIP (Priority) NEVER waits - always goes first                       â”‚
â”‚  â€¢ Video gets 60% guarantee - won't starve                               â”‚
â”‚  â€¢ Data gets 20% guarantee - fair share                                  â”‚
â”‚  â€¢ Best Effort gets leftovers - can't hurt critical traffic              â”‚
â”‚                                                                           â”‚
â”‚  During congestion: VoIP unaffected, Video protected, Data okay,         â”‚
â”‚  Best Effort slows down (as intended!)                                   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š DSCP Marking Deep Dive
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IP Packet Header - ToS/DSCP Field                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  IP Header (20 bytes):                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Versionâ”‚ IHL â”‚ ToS/DSCP â”‚ Total Length â”‚ ...                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â””â”€â”€â”¬â”€â”€â”˜                                              â”‚
â”‚                        â”‚                                                 â”‚
â”‚                        â–¼                                                 â”‚
â”‚  ToS Byte (8 bits) = Type of Service:                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  DSCP (6 bits)        â”‚ ECN (2 bits)                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                        â”‚                                         â”‚
â”‚       â”‚                        â””â”€ Explicit Congestion Notification       â”‚
â”‚       â”‚                           (not part of QoS marking)              â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â””â”€ Differentiated Services Code Point (QoS marking)                â”‚
â”‚          6 bits = 0-63 values possible                                   â”‚
â”‚                                                                           â”‚
â”‚  DSCP Value Breakdown (6 bits):                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Bit 7 â”‚ Bit 6 â”‚ Bit 5 â”‚ Bit 4 â”‚ Bit 3 â”‚ Bit 2 â”‚                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                           â”‚
â”‚  Common DSCP Values with Binary Representation:                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Name     â”‚ DSCP â”‚ Binary  â”‚ Hex â”‚ Use Case                       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ EF       â”‚  46  â”‚ 101110  â”‚ 0xB8â”‚ VoIP, real-time voice          â”‚  â”‚
â”‚  â”‚          â”‚      â”‚         â”‚     â”‚ (Expedited Forwarding)         â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ AF41     â”‚  34  â”‚ 100010  â”‚ 0x88â”‚ Live video streaming           â”‚  â”‚
â”‚  â”‚          â”‚      â”‚         â”‚     â”‚ (Assured Forwarding class 4)   â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ AF31     â”‚  26  â”‚ 011010  â”‚ 0x68â”‚ Streaming video (lower pri)    â”‚  â”‚
â”‚  â”‚          â”‚      â”‚         â”‚     â”‚ (Assured Forwarding class 3)   â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ CS3      â”‚  24  â”‚ 011000  â”‚ 0x60â”‚ Broadcast video signaling      â”‚  â”‚
â”‚  â”‚          â”‚      â”‚         â”‚     â”‚ (Class Selector 3)             â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ AF21     â”‚  18  â”‚ 010010  â”‚ 0x48â”‚ Transactional data             â”‚  â”‚
â”‚  â”‚          â”‚      â”‚         â”‚     â”‚ (Assured Forwarding class 2)   â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ CS1      â”‚   8  â”‚ 001000  â”‚ 0x20â”‚ Scavenger (lower than BE)      â”‚  â”‚
â”‚  â”‚          â”‚      â”‚         â”‚     â”‚ (Class Selector 1)             â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ BE       â”‚   0  â”‚ 000000  â”‚ 0x00â”‚ Best Effort (default)          â”‚  â”‚
â”‚  â”‚          â”‚      â”‚         â”‚     â”‚ No QoS guarantee               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  Assured Forwarding (AFxy) Explained:                                    â”‚
â”‚  AF [Class] [Drop Precedence]                                            â”‚
â”‚     â”‚        â”‚                                                            â”‚
â”‚     â”‚        â””â”€ Drop precedence (1=low, 2=medium, 3=high drop prob)      â”‚
â”‚     â”‚          When congested, higher drop precedence discarded first    â”‚
â”‚     â”‚                                                                     â”‚
â”‚     â””â”€ Class (1-4): Priority level                                       â”‚
â”‚        Class 4 > Class 3 > Class 2 > Class 1                             â”‚
â”‚                                                                           â”‚
â”‚  Example: AF41 vs AF42 vs AF43                                           â”‚
â”‚  â€¢ All in Class 4 (same priority queue)                                  â”‚
â”‚  â€¢ During congestion: AF43 packets dropped first, then AF42, then AF41   â”‚
â”‚  â€¢ Use AF41 for critical video, AF43 for less important video            â”‚
â”‚                                                                           â”‚
â”‚  How Routers Use DSCP:                                                   â”‚
â”‚  1. Packet arrives at router input interface                             â”‚
â”‚  2. Router reads DSCP field from IP header                               â”‚
â”‚  3. DSCP value maps to queuing class (via QoS policy)                    â”‚
â”‚  4. Packet placed in appropriate output queue                            â”‚
â”‚  5. Scheduler serves queues based on priority + bandwidth allocation     â”‚
â”‚                                                                           â”‚
â”‚  Trust Boundary Concept:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Trust  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Trust  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ IP Camera   â”‚ â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Access SW   â”‚ â”€â”€â”€â”€â”€â”€â”€â†’â”‚  Core SW    â”‚       â”‚
â”‚  â”‚ Marks AF41  â”‚         â”‚ (trusts DSCP)â”‚         â”‚ (trusts DSCP)â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                           â”‚
â”‚  âœ… Best Practice: Mark at source (camera, phone) or first switch        â”‚
â”‚  âŒ Bad Practice: Remarking at every hop (inconsistent behavior)         â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”„ Queuing Discipline Comparison
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FIFO vs Priority vs WFQ vs CBWFQ                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  1. FIFO (First In, First Out) - No QoS:                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚                                                                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚      â”‚        Single Queue (no prioritization)         â”‚                â”‚
â”‚      â”‚  ğŸ“ ğŸ“§ ğŸ¥ ğŸ“ ğŸ“ ğŸ“ ğŸ¥ ğŸ“§ â†’ â†’ â†’ â†’                   â”‚                â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                  â”‚                                                        â”‚
â”‚                  â–¼ Output in arrival order                               â”‚
â”‚                                                                           â”‚
â”‚  âœ… Simple, no configuration needed                                       â”‚
â”‚  âŒ VoIP waits behind large file transfers = bad latency                 â”‚
â”‚  âŒ No traffic prioritization                                             â”‚
â”‚                                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                           â”‚
â”‚  2. Priority Queuing (Strict Priority):                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                 â”‚
â”‚                                                                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚      â”‚ Q1 (High):  ğŸ“ ğŸ“ ğŸ“ â”‚ â†’ Output first â”‚                            â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚      â”‚ Q2 (Medium):  ğŸ¥ ğŸ¥  â”‚ â†’ If Q1 empty  â”‚                            â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚      â”‚ Q3 (Normal):  ğŸ“§ ğŸ“§  â”‚ â†’ If Q2 empty  â”‚                            â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚      â”‚ Q4 (Low):  ğŸ“ ğŸ“ ğŸ“  â”‚ â†’ If Q3 empty  â”‚                            â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                           â”‚
â”‚  âœ… VoIP always gets through instantly                                    â”‚
â”‚  âœ… Clear priority levels                                                 â”‚
â”‚  âŒ Low priority can STARVE (never get bandwidth if high priority busy)  â”‚
â”‚  âŒ Risk: VoIP flood can monopolize link                                 â”‚
â”‚                                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                           â”‚
â”‚  3. WFQ (Weighted Fair Queuing):                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚                                                                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚      â”‚ Per-flow queues (automatic classification)           â”‚           â”‚
â”‚      â”‚                                                       â”‚           â”‚
â”‚      â”‚  Flow 1 (VoIP):   ğŸ“ ğŸ“  â”‚ Weight: 3 â”€â”€â”€â”             â”‚           â”‚
â”‚      â”‚  Flow 2 (Video):  ğŸ¥ ğŸ¥  â”‚ Weight: 2 â”€â”€â”€â”¼â”€â†’ Scheduler â”‚           â”‚
â”‚      â”‚  Flow 3 (FTP):    ğŸ“ ğŸ“  â”‚ Weight: 1 â”€â”€â”€â”˜             â”‚           â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                  â”‚                                                        â”‚
â”‚                  â–¼ Output weighted by flow size                          â”‚
â”‚                                                                           â”‚
â”‚  âœ… Fair bandwidth sharing                                                â”‚
â”‚  âœ… Small packets (VoIP) get preference over large (FTP)                 â”‚
â”‚  âœ… Prevents starvation                                                   â”‚
â”‚  âŒ No strict priority (VoIP can still wait a bit)                       â”‚
â”‚  âŒ No bandwidth guarantees                                               â”‚
â”‚                                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                           â”‚
â”‚  4. CBWFQ + LLQ (Class-Based WFQ with Low Latency Queue):                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â”‚
â”‚                                                                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚      â”‚ LLQ (Priority):  ğŸ“ ğŸ“ ğŸ“ â”‚ Strict Priority              â”‚         â”‚
â”‚      â”‚                           â”‚ (always first)               â”‚         â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚      â”‚ Class VIDEO:  ğŸ¥ ğŸ¥ ğŸ¥    â”‚ Guaranteed 60% BW            â”‚         â”‚
â”‚      â”‚                           â”‚ (600 Mbps minimum)           â”‚         â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚      â”‚ Class DATA:   ğŸ“§ ğŸ“§       â”‚ Guaranteed 20% BW            â”‚         â”‚
â”‚      â”‚                           â”‚ (200 Mbps minimum)           â”‚         â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚      â”‚ Class DEFAULT: ğŸ“ ğŸ“ ğŸ“   â”‚ Remaining BW (20%)           â”‚         â”‚
â”‚      â”‚                           â”‚ Fair queue within class      â”‚         â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                  â”‚                                                        â”‚
â”‚                  â–¼ Output: Priority first, then weighted                 â”‚
â”‚                                                                           â”‚
â”‚  âœ… Combines best of Priority + WFQ                                       â”‚
â”‚  âœ… LLQ for VoIP = ultra-low latency                                      â”‚
â”‚  âœ… Bandwidth guarantees per class                                        â”‚
â”‚  âœ… No starvation (every class gets minimum bandwidth)                    â”‚
â”‚  âœ… Industry standard for production networks                             â”‚
â”‚  âŒ Requires manual class configuration                                   â”‚
â”‚                                                                           â”‚
â”‚  BEST PRACTICE: Use CBWFQ + LLQ for modern networks!                     â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Video Streaming QoS Example
---------------------------
Priority levels for broadcast facility::

    Priority 1 (Highest):
      - SMPTE 2110 uncompressed video
      - RTP video streams
      - PTP timing packets
    
    Priority 2:
      - Compressed video (H.264/HEVC)
      - Audio streams (AAC)
      - Control protocols (SIP)
    
    Priority 3:
      - File transfers
      - Web browsing
      - Email

Queuing Disciplines
-------------------
**FIFO** (First In First Out)
  - No prioritization
  - Simplest, no QoS

**Priority Queuing**
  - Strict priority levels
  - High priority can starve low priority

**WFQ** (Weighted Fair Queuing)
  - Fairness with weights
  - Prevents starvation

**CBWFQ** (Class-Based WFQ)
  - Bandwidth guarantees per class
  - Low Latency Queue (LLQ) for critical traffic

Configuration Example (Cisco)
-----------------------------
Define traffic class::

    class-map match-any VIDEO
      match ip dscp af41
      match protocol rtp

Define policy::

    policy-map PRODUCTION
      class VIDEO
        priority percent 60
      class AUDIO
        bandwidth percent 20
      class class-default
        fair-queue

Apply to interface::

    interface GigabitEthernet0/0
      service-policy output PRODUCTION

Marketing Example
-----------------
Mark video traffic::

    access-list 100 permit udp any any range 5004 5020
    
    class-map VIDEO_TRAFFIC
      match access-group 100
    
    policy-map MARK_VIDEO
      class VIDEO_TRAFFIC
        set ip dscp af41

Performance Metrics
-------------------
**Latency**: One-way delay
  - VoIP: < 150ms
  - Video conferencing: < 200ms
  - Live production: < 50ms

**Jitter**: Delay variation
  - VoIP: < 30ms
  - Video: < 50ms

**Packet Loss**:
  - VoIP: < 1%
  - Video: < 0.5%
  - Live production: < 0.1%

**Bandwidth**: Required capacity
  - HD video: 5-10 Mbps
  - 4K video: 15-25 Mbps
  - VoIP: 64-100 Kbps per call

QoS Models
----------
**Best Effort**
  - No QoS guarantees
  - Default internet

**Integrated Services (IntServ)**
  - Per-flow reservations
  - RSVP protocol
  - Doesn't scale well

**Differentiated Services (DiffServ)**
  - Class-based treatment
  - Scalable
  - Most common in enterprise

Troubleshooting
---------------
**Problem**: Video stuttering during peak hours
â””â”€ Check: QoS markings applied correctly
â””â”€ Check: Sufficient bandwidth allocation
â””â”€ Verify: No traffic policing dropping packets

**Problem**: VoIP quality degrades
â””â”€ Check: EF (DSCP 46) marking for voice
â””â”€ Check: Priority queue configured
â””â”€ Verify: Latency < 150ms, jitter < 30ms

Important Notes
---------------
- QoS must be implemented end-to-end
- Marking at source is most effective
- Monitor QoS statistics regularly
- Test during peak traffic periods
- Document QoS policies clearly
